<html>
    <%- include('../../partials/header.ejs')%>
    <body>
        <h1>Your Blog details are : </h1> <br>
        <h1>
            <%= fullBlog.title %>
        </h1>
        <h3>
            <%= fullBlog.snippet %>
        </h3>
        <p>
            <%= fullBlog.body %>
        </p>
        <a class="deleteBtn" style="cursor: pointer;" data-doc="<%= fullBlog._id %>">DELETE</a>

        <form action="/update_page/<%= fullBlog._id %>" method="POST">
            <a class="updateBtn" style="cursor: pointer;" >UP-DATE</a>        
        </form>
        <%- include('../../partials/footer.ejs')%>
    </body>

    <!-- Vidio for learning delete request (https://www.youtube.com/watch?v=VVGgacjzc2Y&t=703s) -->

    <script>
        const trashcan = document.querySelector('a.deleteBtn');

        trashcan.addEventListener('click', (e) => {
        const endPoint = `/blogs/${trashcan.dataset.doc}`;
        fetch(endPoint , {
            method:'DELETE'
        })
        .then((response) => response.json())
        .then((data) => window.location.href = data.url)
        .catch(error=>{
            console.log(error);
        })
        })
    </script>
</html>